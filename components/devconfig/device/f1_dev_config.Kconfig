# STM32F4 device config.
# This file only use for STM32F4 device series.



# Menu project config.
menu "Project"
    config EDF_VERSION
        string "EDF version"
        default 3.0.0
    config CPU_CORE
        string "CPU core"
        default "ARM Cortex-M3"
    config CORE_HEADER_FILE
        string "Device core header file"
        default "core_cm3.h"
    config CMSIS_HEADER_FILE
        string "Device cmsis header file"
        default "stm32f1xx.h"
    config HAL_HEADER_FILE
        string "HAL driver header file"
        default "stm32f1xx_hal.h"
endmenu
# End menu project config.





# Menu device base configuration.
# Config memory, clock.
menu "Device parameters"
    menu "Memory."
        config MEM_IRAM_SIZE
            int "Total internal RAM size (KiloBytes)"
            default 64
            help
            Total internal RAM capacity of STM32 device.
    endmenu


    menu "Clock"
        config CLK_HSI_TRIM_VALUE
            int "HSI trimming value"
            default 16
            help
            High speed internal crystal trimming value.
            menu "PLL"
        menu "HSE"
            config CLK_MIN_HSE_FREQ
                int "Min HSE frequency (MHz)"
                default 4
                range 1 26
                help 
                Minimum of external crystal frequency.
            config CLK_MAX_HSE_FREQ
                int "Max HSE frequency (MHz)"
                default 16
                range 4 26
                help 
                Maximum of external crystal frequency.
        endmenu
        menu "Bus clock"   
            config CLK_MAX_HCLK_FREQ
                int "Max HCLK clock frequency (MHz)"
                default 72
                range 8 100
                help
                Max HCLK clock frequency. 
            config CLK_MAX_APB1_FREQ
                int "Max APB1 clock frequency (MHz)"
                default 36
                range 8 100
                help
                Max APB1 clock frequency.                
            config CLK_MAX_APB2_FREQ
                int "Max APB2 clock frequency (MHz)"
                default 72
                range 8 100
                help
                Max APB2 clock frequency.     
            config CLK_MAX_SDIO_USB_FREQ
                int "Max SDIO-USB clock frequency (MHz)"
                default 48
                range 32 48
                help
                Max SDIO-USB clock frequency.
        endmenu
        menu "PLL"
            config CLK_MAX_PLL_OFREQ
                int "Max PLL output frequency (MHz)"
                default 72
                range 8 100
                help 
                Maximum of PLL output frequency.

        endmenu
    endmenu
endmenu
# End menu device base config.




# Menu device configuration.
menu "Device configurations"
    menu "Flash memory"
        config MEM_FLASH_PREFETCH_ENABLE
            bool "Prefetch mode"
            default y
    endmenu

    menu "Clock."
        menu "Crystals value"
            config CLK_HSI_FREQ
                int "High speed internal crystal (HSI) frequency (MHz)"
                default 8
                help
                High speed internal crystal frequency.
            config CLK_LSI_FREQ
                int "Low speed internal crystal (LSI) frequency (KHz)"
                default 40
                help
                Low speed internal crystal frequency.
            config CLK_HSE_FREQ
                int "High speed external crystal (HSE) frequency (MHz)"
                default 8
                help
                High speed external crystal frequency.
            config CLK_LSE_FREQ
                int "Low speed external crystal (LSE) frequency (Hz)"
                default 32768
                help
                Low speed external crystal frequency.
        endmenu

        choice
            prompt "Clock source"
            default CLK_SOURCE_PLL
            config CLK_SOURCE_HSI
                bool "HSI (High speed internal crystal)"
            config CLK_SOURCE_HSE
                bool "HSE (High speed external crystal)"
            config CLK_SOURCE_PLL
                bool "PLL (Phase-locked loop)"
        endchoice

        choice
            prompt "PLL source"
            depends on CLK_SOURCE_PLL
            default CLK_PLL_SOURCE_HSI
            config CLK_PLL_SOURCE_HSI
                bool "HSI (High speed internal crystal)"
            config CLK_PLL_SOURCE_HSE
                bool "HSE (High speed external crystal)"
        endchoice

        config CLK_HCLK_FREQ
            int "HCLK frequency (MHz)"
            default 8
            range 2 CLK_MAX_HCLK_FREQ
            help 
            HCLK clock frequency.
        config CLK_APB1_FREQ
            int "APB1 frequency (MHz)"
            default 8
            range 2 CLK_MAX_APB1_FREQ
            help 
            APB1 clock frequency.
        config CLK_APB2_FREQ
            int "APB2 frequency (MHz)"
            default 8
            range 2 CLK_MAX_APB2_FREQ
            help 
            APB1 clock frequency.
        config CLK_SDIO_USB_FREQ
            int "SDIO-USB frequency (MHz)"
            default CLK_MAX_SDIO_USB_FREQ
            range 2 CLK_MAX_SDIO_USB_FREQ 
            help 
            SDIO-USB clock frequency.
    endmenu
endmenu
# End menu device configuration.





# Menu features.
menu "Features"
    menu "LOG Monitor"
        config LOG_MONITOR_ENABLE
            bool "Enable LOG Monitor."
            default y
            help
            Enable LOG Monitor.
        choice
            prompt "Output stream"
            default LOG_MONITOR_OUTPUT_UART
            depends on LOG_MONITOR_ENABLE
            config LOG_MONITOR_OUTPUT_UART
                bool "UART"
            config LOG_MONITOR_OUTPUT_USBVCP
                bool "USBVCP"
        endchoice
        config LOG_MONITOR_LEVEL_SHORT
            bool "Display short level"
            default y
            depends on LOG_MONITOR_ENABLE
            help
            For example: "I" if enable and "INFO" if not. 
        config LOG_MONITOR_TICK
            bool "Display tick"
            default y
            depends on LOG_MONITOR_ENABLE
            help
            Show tick time. 
        config LOG_MONITOR_UART_INSTANCE
            string "UART num."
            default UART2
            depends on LOG_MONITOR_ENABLE && LOG_MONITOR_OUTPUT_UART
            help
            UART LOG Monitor RX port.
        config LOG_MONITOR_UART_TXPIN
            string "TX pin."
            default A2
            depends on LOG_MONITOR_ENABLE && LOG_MONITOR_OUTPUT_UART
            help
            UART LOG Monitor TX pin.
        config LOG_MONITOR_UART_RXPIN
            string "RX pin."
            default A3
            depends on LOG_MONITOR_ENABLE && LOG_MONITOR_OUTPUT_UART
            help
            UART LOG Monitor RX pin.
        config LOG_MONITOR_UART_BAUDRATE
            int "Baudrate."
            default 115200
            depends on LOG_MONITOR_ENABLE && LOG_MONITOR_OUTPUT_UART
            help
            UART LOG Monitor baudrate.

    endmenu

    menu "Check config fail"
        config SYS_CONFIG_FAIL_RESET_ENABLE
            bool "Enable reset if config fail"
            default y
            help
            If any config fail this will reset device.
        config SYS_CONFIG_FAIL_RESET_TIME
            int "Config fail reset wait time (Miliseconds)"
            default 5000
            depends on SYS_CONFIG_FAIL_RESET_ENABLE
            help
            Config fail reset wait time (Miliseconds).
    endmenu


    menu "WatchDog"
        depends on PERIPH_IWDG_ENABLE
        config WATCHDOG_ENABLE
            bool "Enable Watchdog reset"
            default y
            help
            Enable watchdog reset feature.
        config WATCHDOG_WAIT_RESET_TIME
            int "Wait for reset time (Miliseconds)"
            default 5000
            depends on WATCHDOG_ENABLE
            help
            Device will be reset after "This value" Miliseconds impossible refresh.
    endmenu

    menu "SDRAM support"
        depends on FMC_SDRAM_ENABLE 
        config MEM_SUPPORT_SDRAM
            bool "Support SDRAM"
            default n
            help 
            Support external SDRAM.
        config FMC_SDRAM_SIZE
            int "Capacity (MegaBits)"
            depends on MEM_SUPPORT_SDRAM
            default 64
            help
            External SDRAM capacity (MegaBits)
        config FMC_SDRAM_ADDRESS
            hex "Start address"
            depends on MEM_SUPPORT_SDRAM
            range 0xC0000000 0xD0000000
            default 0xC0000000 if FMC_SDRAM_BANK1
            default 0xD0000000 if FMC_SDRAM_BANK2
            help
            External SDRAM start address
    endmenu
endmenu
# End menu features.





# Menu RTOS configuration.
menu "RTOS"
    config RTOS_FPU_ENABLE
        bool "FPU enable"
        default n
        depends on FPU_ENABLE
        help
        Enable FPU for RTOS.

    config RTOS_MPU_ENABLE
        bool "MPU enable"
        default n
        help
        Enable MPU for RTOS.

    config RTOS_TICK_RATE
        int "Tick rate (Hz)"
        range 10 SYSTICK_FREQUENCY
        default 1000
        help
        Tick rate use for RTOS tick, this value specifies the number of RTOS tick increments per second (for example: 1000 is 1000 RTOS tick increments per second).

    config RTOS_HEAP_SIZE
        int "Heap size (KiloBytes)"
        range 1 MEM_IRAM_SIZE
        default 2
        help
        Internal RAM capacity share for RTOS heap.

    config RTOS_MIN_STACK_SIZE
        int "Minimum stack size (Bytes)"
        default 512
        help
        RTOS minimum statck size.

    config RTOS_MAX_TASK_PRIORITY
        int "Max task priority"
        range 1 56
        default 48
        help
        Max of RTOS task priority.

    config RTOS_MAX_SYSTEM_INT_PRIORITY
        int "Max system interrupt priority"
        range 2 15
        default 4
        help
        Max of system interrupt priority (system interrupt priority range from this value to 15).

    config RTOS_APP_MAIN_TASK_PRIORITY
        int "app_main task priority"
        default 1
        help
        app_main task priority.

    config RTOS_APP_MAIN_TASK_STACK_SIZE
        int "app_main task stack size (KiloBytes)"
        default 1
        range 1 RTOS_HEAP_SIZE
        help
        RTOS heap size share for app_main task.
endmenu
# End menu RTOS configuration.





# Menu Peripherals configuration.
menu "Peripherals config"
# EMBEDFLASH config.
    menu "EMBEDFLASH"
        config PERIPH_EMBEDFLASH_ENABLE
            bool "Enable"
            default y
    endmenu
# End EXTI config.

# System tick config.
    menu "SYSTICK"
        config SYSTICK_INTERRUPT_PRIORITY
            int "Interrupt priority"
            range 0 15
            default 15
            help
            System tick interrupt priority.
        config SYSTICK_FREQUENCY
            int "Frequency (Hz)"
            range 10 1000
            default 1000
            help
            System tick frequency.
    endmenu
# End System tick config.

# IWDG config.
    menu "IWDG"
        config PERIPH_IWDG_ENABLE
            bool "Enable"
            default y
    endmenu
# End EXTI config.

# GPIO config.
    menu "GPIO"
    # Default output speed 
        choice
            prompt "Default output speed"
            default PERIPH_GPIO_DEFAULT_OUTPUT_SPEED_HIGH
            config PERIPH_GPIO_DEFAULT_OUTPUT_SPEED_LOW 
                bool "Low"
            config PERIPH_GPIO_DEFAULT_OUTPUT_SPEED_MEDIUM 
                bool "Medium"
            config PERIPH_GPIO_DEFAULT_OUTPUT_SPEED_HIGH 
                bool "High"
        endchoice
        choice
            prompt "Default output type"
            default PERIPH_GPIO_DEFAULT_OUTPUT_PUSHPULL
            config PERIPH_GPIO_DEFAULT_OUTPUT_PUSHPULL 
                bool "Push Pull"
            config PERIPH_GPIO_DEFAULT_OUTPUT_OPENDRAIN 
                bool "Open drain"
        endchoice
    endmenu
#end GPIO config.

# EXTI config.
    menu "EXTI"
        config PERIPH_EXTI_ENABLE
            bool "Enable"
            default y
        config PERIPH_EXTI_LOG
            bool "LOG enable"
            default y
            depends on PERIPH_EXTI_ENABLE && LOG_MONITOR_ENABLE
    endmenu
# End EXTI config.

# DMA config.
    menu "DMA"
        config PERIPH_DMA_ENABLE
            bool "Enable"
            default y
        config PERIPH_DMA_DEFAULT_OPERATION_TIMEOUT
            int "Default operation timeout"
            default 1000
            depends on PERIPH_DMA_ENABLE
        config PERIPH_DMA_LOG
            bool "LOG enable"
            default y
            depends on PERIPH_DMA_ENABLE && LOG_MONITOR_ENABLE
    endmenu
# End DMA config.

# ADC config.
    menu "ADC"
        config PERIPH_ADC_ENABLE
            bool "Enable"
            default y
        config PERIPH_ADC_LOG
            bool "LOG enable"
            default y
            depends on PERIPH_ADC_ENABLE && LOG_MONITOR_ENABLE
    endmenu
# End ADC config.

# TIM config.
    menu "TIM"
        config PERIPH_TIM_ENABLE
            bool "Enable"
            default y
        config PERIPH_TIM_LOG
            bool "LOG enable"
            default y
            depends on PERIPH_TIM_ENABLE && LOG_MONITOR_ENABLE
    endmenu
# End TIM config.

# UART config.
    menu "UART"
        config PERIPH_UART_ENABLE
            bool "Enable"
            default y
        config PERIPH_UART_LOG
            bool "LOG enable"
            default n
            depends on PERIPH_UART_ENABLE && LOG_MONITOR_ENABLE
        config PERIPH_UART_DEFAULT_OPERATION_TIMEOUT
            int "Default operation timeout"
            default 1000
            range 1 60000
            depends on PERIPH_UART_ENABLE
        config PERIPH_UART_DEFAULT_BAUDRATE 
            int "Default baudrate"
            default 115200
            range 1200 2000000
            depends on PERIPH_UART_ENABLE
    endmenu
# End UART config.

# I2C config.
    menu "I2C"
        config PERIPH_I2C_ENABLE
            bool "Enable"
            default y
        config PERIPH_I2C_DEFAULT_ANALOG_FILTER
            bool "Default analog filter"
            default y
            depends on PERIPH_I2C_ENABLE && LOG_MONITOR_ENABLE
        config PERIPH_I2C_DEFAULT_DIGITAL_FILTER
            int "Default digital filter"
            default 7
            range 0 15
            depends on PERIPH_I2C_ENABLE && LOG_MONITOR_ENABLE
        config PERIPH_I2C_LOG
            bool "LOG enable"
            default y
            depends on PERIPH_I2C_ENABLE && LOG_MONITOR_ENABLE
        config PERIPH_I2C_DEFAULT_OPERATION_TIMEOUT
            int "Default operation timeout"
            default 1000
            range 1 60000
            depends on PERIPH_I2C_ENABLE
    endmenu
# End I2C config.

# SPI config.
    menu "SPI"
        config PERIPH_SPI_ENABLE
            bool "Enable"
            default y
        config PERIPH_SPI_LOG
            bool "LOG enable"
            default y
            depends on PERIPH_SPI_ENABLE && LOG_MONITOR_ENABLE
        config PERIPH_SPI_DEFAULT_OPERATION_TIMEOUT
            int "Default operation timeout"
            default 1000
            range 1 60000
            depends on PERIPH_SPI_ENABLE
    endmenu
# End SPI config.

# RNG config.
    menu "RNG"
        config PERIPH_RNG_ENABLE
            bool "Enable"
            default n
        config PERIPH_RNG_LOG
            bool "LOG enable"
            default n
            depends on PERIPH_RNG_ENABLE && LOG_MONITOR_ENABLE
    endmenu
# End RNG config.

# Menu FMC SDRAM config.
    menu "FMC-SDRAM"
        config FMC_SDRAM_ENABLE
            bool "Enable"
            default n
            help
            Flexible Memory Controller - SDRAM enable
        choice
            prompt "Bank"
            default FMC_SDRAM_BANK1
            depends on FMC_SDRAM_ENABLE
            config FMC_SDRAM_BANK1
                bool "Bank1"
            config FMC_SDRAM_BANK2
                bool "Bank2"
            help
            FMC-SDRAM bank
        endchoice
        config FMC_SDRAM_DEFAULT_TIMEOUT
            int "Default timeout (Miliseconds)"
            default 5000
            help
            FMC-SDRAM default timeout (Miliseconds).
        menu "Hardware connection."
            depends on FMC_SDRAM_ENABLE
            config FMC_SDRAM_A0_PIN
                string "A0 pin"
                default F0
            config FMC_SDRAM_A1_PIN
                string "A1 pin"
                default F1
            config FMC_SDRAM_A2_PIN
                string "A2 pin"
                default F2
            config FMC_SDRAM_A3_PIN
                string "A3 pin"
                default F3
            config FMC_SDRAM_A4_PIN
                string "A4 pin"
                default F4
            config FMC_SDRAM_A5_PIN
                string "A5 pin"
                default F5
            config FMC_SDRAM_A6_PIN
                string "A6 pin"
                default F12
            config FMC_SDRAM_A7_PIN
                string "A7 pin"
                default F13
            config FMC_SDRAM_A8_PIN
                string "A8 pin"
                default F14
            config FMC_SDRAM_A9_PIN
                string "A9 pin"
                default F15
            config FMC_SDRAM_A10_PIN
                string "A10 pin"
                default G0
            config FMC_SDRAM_A11_PIN
                string "A11 pin"
                default G1

            config FMC_SDRAM_D0_PIN
                string "D0 pin"
                default D14
            config FMC_SDRAM_D1_PIN
                string "D1 pin"
                default D15
            config FMC_SDRAM_D2_PIN
                string "D2 pin"
                default D0
            config FMC_SDRAM_D3_PIN
                string "D3 pin"
                default D1
            config FMC_SDRAM_D4_PIN
                string "D4 pin"
                default E7
            config FMC_SDRAM_D5_PIN
                string "D5 pin"
                default E8
            config FMC_SDRAM_D6_PIN
                string "D6 pin"
                default E9
            config FMC_SDRAM_D7_PIN
                string "D7 pin"
                default E10
            config FMC_SDRAM_D8_PIN
                string "D8 pin"
                default E11
            config FMC_SDRAM_D9_PIN
                string "D9 pin"
                default E12
            config FMC_SDRAM_D10_PIN
                string "D10 pin"
                default E13
            config FMC_SDRAM_D11_PIN
                string "D11 pin"
                default E14
            config FMC_SDRAM_D12_PIN
                string "D12 pin"
                default E15
            config FMC_SDRAM_D13_PIN
                string "D13 pin"
                default D8
            config FMC_SDRAM_D14_PIN
                string "D14 pin"
                default D9
            config FMC_SDRAM_D15_PIN
                string "D15 pin"
                default D10

            config FMC_SDRAM_BA0_PIN
                string "BA0 pin"
                default G4
            config FMC_SDRAM_BA1_PIN
                string "BA1 pin"
                default G5
            
            config FMC_SDRAM_NBL0_PIN
                string "NBL0 pin"
                default E0
            config FMC_SDRAM_NBL1_PIN
                string "NBL1 pin"
                default E1

            config FMC_SDRAM_CLK_PIN
                string "CLK pin"
                default G8
            config FMC_SDRAM_CAS_PIN
                string "CAS pin"
                default G15
            config FMC_SDRAM_RAS_PIN
                string "RAS pin"
                default F11
            config FMC_SDRAM_CKE_PIN
                string "CKE pin"
                default C3
            config FMC_SDRAM_NE_PIN
                string "NE pin"
                default C2
            config FMC_SDRAM_NWE_PIN
                string "NWE pin"
                default C0
        endmenu

    endmenu
# End menu FMC SDRAM config.

endmenu
# End Peripherals configuration.




# Menu network config.



# End menu network config.



